import{g as n}from"./RedirectService.4a120354.js";async function r(){const i=(await n()).filter(e=>e.active===!0);await new Promise(e=>{chrome.declarativeNetRequest.getDynamicRules(async t=>{await new Promise(a=>{chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:t.map(o=>o.id)},()=>a())}),e()})}),i.forEach(e=>{const t={};if(e.newHost&&e.newHost.length>0)t.host=e.newHost;else return;const a={id:e.id,priority:1,action:{type:"redirect",redirect:{transform:{...t}}},condition:{urlFilter:e.origin,resourceTypes:["main_frame"]}};chrome.declarativeNetRequest.updateDynamicRules({addRules:[a]})})}chrome.runtime.onStartup.addListener(()=>{r()});chrome.storage.onChanged.addListener(r);
